<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Payment</title>
<link href="css/ipaylinks20150704.css" rel="stylesheet" type="text/css" />
<style>
select {
	width: 125px;
}
</style>
  <script type="text/javascript" src="js/datepicker/WdatePicker.js"></script>
<script src="js/jquery-1.3.2.js" type="text/javascript"></script>
  <script src="js/valida_cpf_cnpj.js"></script>
  <script src="js/exemplo_1.js"></script>
  <script src="js/exemplo_2.js"></script>     
  <script src="js/exemplo_3.js"></script>
</head>

<body>
	
	<div class="box01" style="height: 720px;">
		<!-- 半透明遮罩层 -->
		<div id="a1" style="display:none;background-color:gray;margin:0px 0px;position:absolute; z-index:9999;opacity:0.2;text-align:center;padding-top:50px;color:red;"></div>
		<!-- loadding层 -->
		<div id="animate" style="display:none;width:800px;height:520px;position:absolute; z-index:99999;text-align:center;padding-top:100px;color:red;"> <!-- margin:20px 550px; -->
			<img src="images/loadding.gif" style="opacity:1;" />
			<div style="margin:30px auto;">The card binding is being processed. Please wait for a moment.</div>
		</div>
		<div class="box_inner_01">
			<div class="inner_title">Please fill in the information</div>
		</div>
		<div class="box_inner_02" style="height: 660px;">
			<!--图片样式-->
			<div class="image_show">			  
			       <div class="show01">
					     <img src="images/boleto.png" alt="图片不存在" id="boletoImg"/>
				   </div>
			</div>
			<div class="clear"></div>
	<form action="${submitURL?default('')}" method="post" name="frm1" id="frm1">	
			<!--填写数据样式-->
			<div class="form" style="margin-left:50px;">
				<div class="fitem">
					<label>CPF：</label><input type="text"  class="cpf_cnpj" name="document" id="document"  /><span>*</span><tip id="documentTip"></tip>
				</div>
				<div class="fitem">
					<label>FirstName：</label><input type="text" name="firstName" id="firstName" /><span>*</span><tip id="firstNameTip"></tip>
					
				</div>
				<div class="fitem">
					<label>LastName：</label><input type="text" name="lastName" id="lastName"/><span>*</span><tip id="lastNameTip"></tip>
					
				</div>
				<div class="fitem">
					<label>Email：</label><input type="text" name="billEmail" id="email"  /><span>*</span><tip id="emailTip"></tip>
					
				</div>
				<div class="fitem">
					<label>Telephone：</label><input type="text" name="billPhoneNumber" id="telephone"/><span>*</span><tip id="telephoneTip"></tip>
					
				</div>
				<div class="fitem">
				<label>BirthDate：</label>
				<input style="width: 180px;" class="Wdate"  readonly="readonly" id="birthDate" name="birthDate" type="text" onClick="WdatePicker({dateFmt:'dd/MM/yyyy',lang:'en'})"/>
				<span>*</span>
				<tip id="birthDateTip">	</tip>
				</div>
				
				<div class="fitem">
					<label>Zipcode：</label><input type="text" name="billPostalCode" id="billPostalCode"  /><span>*</span><tip id="billPostalCodeTip"></tip>
					
				</div>
				<div class="fitem">
					<label>City：</label><input type="text" name="billCity" id="city" /><span>*</span><tip id="cityTip"></tip>
					
				</div>
				<div class="fitem">
					<label>State：</label><input type="text" name="billState" id="billState" /><span>*</span><tip id="billStateTip"></tip>
					
				</div>
				<div class="fitem">
					<label>Address：</label><input type="text" name="billAddress" id="address" /><span>*</span><tip id="addressTip"></tip>
					
				</div>
				<div class="fitem">
					<label>Street number：</label><input type="text" name="streetNumber" id="streetNumber" /><span>*</span><tip id="streetNumberTip"></tip>
					
				</div>
				<div class="fitem" style="height:42px;">
					<label></label>
					<input type="button" id="btnSubmit" value="submit" class="fsubmit" style="width:181px;height:32px;"/>&nbsp;&nbsp;<tip id="resultTip"></tip>
				</div>
			</div>
			<input type="hidden" name="version" id="version" value="${version?default('')}"/>			
			<input type="hidden" name="orderId" id="orderId" value="${orderId?default('')}"/>			
			<input type="hidden" name="displayName" id="displayName" value="${displayName?default('')}"/>			
			<input type="hidden" name="registerUserId" id="registerUserId" value="${registerUserId?default('')}"/>			
			<input type="hidden" name="goodsName" id="goodsName" value="${goodsName?default('')}"/>			
			<input type="hidden" name="goodsDesc" id="goodsDesc" value="${goodsDesc?default('')}"/>			
			<input type="hidden" name="submitTime" id="submitTime" value="${submitTime?default('')}"/>			
			<input type="hidden" name="failureTime" id="failureTime" value="${failureTime?default('')}"/>			
			<input type="hidden" name="customerIP" id="customerIP" value="${customerIP?default('')}"/>			
			<input type="hidden" name="settlementCurrencyCode" id="settlementCurrencyCode" value="${settlementCurrencyCode?default('')}"/>			
			<input type="hidden" name="noticeUrl" id="noticeUrl" value="${noticeUrl?default('')}"/>			
			<input type="hidden" name="partnerId" id="partnerId" value="${partnerId?default('')}"/>			
			<input type="hidden" name="tradeType" id="tradeType" value="${tradeType?default('4002')}"/>			
			<input type="hidden" name="orderAmount" id="orderAmount" value="${orderAmount?default('')}"/>			
			<input type="hidden" name="currencyCode" id="currencyCode" value="${currencyCode?default('')}"/>			
			<input type="hidden" name="billCountryCode" id="billCountryCode" value="${billCountryCode?default('')}"/>			
			<input type="hidden" name="payType" value="${payType!'EDC'}"/>
			<input type="hidden" name="language" id="language" value="${language?default('en')}"/>
			<input type="hidden" name="orderTerminal" id="orderTerminal" value="${orderTerminal?default('00')}"/>
			<input type="hidden" name="siteId" id="siteId" value="${siteId?default('')}"/>
			<input type="hidden" name="remark" id="remark" value="${remark?default('')}"/>
			<input type="hidden" name="signData" id="signData" value="${signData?default('')}"/>
			<input type="hidden" name="returnUrl" id="returnUrl" value="${returnUrl?default('')}"/>
			<input type="hidden" name="registerUserId" id="registerUserId" value="${registerUserId?default('')}"/>
           </form>			
		</div>
	</div>
<script type="text/javascript">
//数字粗略验证
function checkNum(obj) {
	//检查是否是非数字值
	if (isNaN(obj.value)) {
		obj.value = "";
	}
}
function check(){	
	
	var document = $('#document').val();
	if('' == document){
		$('#documentTip').html('Please fill in document Value.');
		return false;
	}
	
	var firstName = $('#firstName').val();
	if('' == firstName){
		$('#firstNameTip').html('Please fill in First Name.');
		return false;
	}else{
		var fl = enCheck('#firstNameTip', firstName, 'firstName') ;
		if(!fl) return false ;
	}
	var lastName = $('#lastName').val();
	if('' == lastName){
		$('#lastNameTip').html('Please fill in last Name.');
		return false;
	}else{
		var fl = enCheck('#lastNameTip', lastName, 'lastName') ;
		if(!fl) return false ;
	}	
	var email = $('#email').val();
	if('' == email){
		$('#emailTip').html('Please fill in email Value.');
		return false;
	}else{
		var fl = enCheckEmail('#emailTip', email) ;
		if(!fl) return false ;
	}
	
	var telephone = $('#telephone').val();
	if('' == telephone){
		$('#telephoneTip').html('Please fill in telephone Value.');
		return false;
	}
	
	var birthDate = $('#birthDate').val();
	if('' == birthDate){
		$('#birthDateTip').html('Please fill in birthDate Value.');
		return false;
	}else{
		var fl = enCheckBirthDate('#birthDateTip', birthDate) ;
		if(!fl) return false ;
	}
	
	var billPostalCode = $('#billPostalCode').val();
	if('' == billPostalCode){
		$('#billPostalCodeTip').html('Please fill in zipcode Value.');
		return false;
	}
	
	var city = $('#city').val();
	if('' == city){
		$('#cityTip').html('Please fill in city Value.');
		return false;
	}
	var billState = $('#billState').val();
	if('' == billState){
		$('#billStateTip').html('Please fill in billState Value.');
		return false;
	}
	var address = $('#address').val();
	if('' == address){
		$('#addressTip').html('Please fill in address Value.');
		return false;
	}
	var streetNumber = $('#streetNumber').val();
	if('' == streetNumber){
		$('#streetNumberTip').html('Please fill in streetNumber Value.');
		return false;
	}
	
	return true;
}

String.prototype.startWith=function(str){

    var reg=new RegExp("^"+str);
    return reg.test(this);
}


$(function(){
	
	$("#expirationMonth").blur(function(){
		var expirationMonth = $('#expirationMonth').val();
		if('' != expirationMonth){
			$('#cardExpirationTip').html('');
		}
		
	});
	
	$("#expirationYear").blur(function(){
		var expirationMonth = $('#expirationMonth').val();
		var expirationYear = $('#expirationYear').val();
		if('' != expirationMonth && '' != expirationYear){
			$('#cardExpirationTip').html('');
		}
		
	});
	
	$("#firstName").blur(function(){
		var firstName = $('#firstName').val();
		if('' != firstName){
			
			var flag = enCheck('#firstNameTip', firstName, 'firstName') ;
			//$('#firstNameTip').html('');
			if(flag)
				$('#firstNameTip').html('');
		}
	});
	
	$("#lastName").blur(function(){
		var lastName = $('#lastName').val();
		if('' != lastName){
			var flag = enCheck('#lastNameTip', lastName, 'lastName') ;
			//$('#lastNameTip').html('');
			if(flag)
				$('#lastNameTip').html('');
		}
	});
	
	$("#email").blur(function(){
		var email = $('#email').val();
		if('' != email){
			$('#emailTip').html('');
		}
	});
	$("#telephone").blur(function(){
		var telephone = $('#telephone').val();
		if('' != telephone){
			$('#telephoneTip').html('');
		}
	});
	$("#birthDate").blur(function(){
		var birthDate = $('#birthDate').val();
		if('' != birthDate){
			$('#birthDateTip').html('');
		}
	});
	
	$("#billPostalCode").blur(function(){
		var billPostalCode = $('#billPostalCode').val();
		if('' != billPostalCode){
			$('#billPostalCodeTip').html('');
		}
	});
	$("#city").blur(function(){
		var city = $('#city').val();
		if('' != city){
			$('#cityTip').html('');
		}
	});
	$("#billState").blur(function(){
		var billState = $('#billState').val();
		if('' != billState){
			$('#billStateTip').html('');
		}
	});
	$("#address").blur(function(){
		var address = $('#address').val();
		if('' != address){
			$('#addressTip').html('');
		}
	});
	$("#streetNumber").blur(function(){
		var streetNumber = $('#streetNumber').val();
		if('' != streetNumber){
			$('#streetNumberTip').html('');
		}
	});
	
	$("#btnSubmit").click(function(){
		$('#resultTip').html('');
		if(check()){
			shade();
			document.forms[0].submit();
		}
		
	});

});

//校验姓名，只能输入英文、空格
function enCheck(tipid, desVal, name){
	//校验英文
	var reg = /^[A-Za-z\s]*$/ ;
	var result = reg.test(desVal) ;
	//alert(result) ;
	if(!result){
		if("firstName" == name){
			$(tipid).html("First name in English only") ;
		}else if("lastName" == name){
			$(tipid).html("Last name in English only") ;
		}
		return false ;
	}
	return true ;
}

//校验email
function enCheckEmail(tipid, desVal){
	//校验英文
	 var reg = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
	var result = reg.test(desVal) ;
	if(!result){
		$(tipid).html("Invalid email address ") ;
		return false ;
	}
	return true ;
}
//校验enCheckBirthDate
function enCheckBirthDate(tipid, desVal){
	//校验英文
	 var reg = /(?:0[1-9]|[12][0-9]|3[01])\/(?:0[1-9]|1[0-2])\/((?:19|20)\d{2})/;
	var result = reg.test(desVal) ;
	if(!result){
		$(tipid).html("Date format is invalid") ;
		return false ;
	}
	return true ;
}

function shade(){
	
	var box01Width = $(".box01").width();
	var box01Height = $(".box01").innerHeight() ;
	
	var inner02Width = $(".box_inner_02").width();
	var inner02Height = $(".box_inner_02").height();
	
	var animateMarginTop = (box01Height - inner02Height) / 2 ;
	var animateMarginLeft = (box01Width - inner02Width) / 2 ;
	
	$("#a1").css({width:box01Width, height:box01Height - 50 ,display:'block'});
	$("#animate").css("margin-top", animateMarginTop);
	$("#animate").css("margin-left", animateMarginLeft);
	$("#animate").css({width:inner02Width,height:inner02Height,display:'block'});
}

</script>
<p style="background:url(https://h.online-metrix.net/fp/clear.png?org_id=k8vif92e&session_id=ipaylinks${orderId}&m=1)"></p>
<img src="https://h.online-metrix.net/fp/clear.png?org_id=k8vif92e&session_id=ipaylinks${orderId}&m=2" alt=""/>
<object type="application/x-shockwave-flash" data="https://h.online-metrix.net/fp/fp.swf?org_id=ORGID&session_id=ipaylinks${orderId}" width="1" height="1" id="thm_fp">
   <param name="movie" value="https://h.online-metrix.net/fp/fp.swf?org_id=k8vif92e&session_id=ipaylinks${orderId}" />
<div></div>
</object>
<script src="https://h.online-metrix.net/fp/check.js?org_id=k8vif92e&session_id=ipaylinks${orderId}" type="text/javascript"/>
</body>
</html>

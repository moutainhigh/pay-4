<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta http-equiv="Cache-Control" content="no-store"/>
<meta http-equiv="Cache-Control" content="no-cache"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>
<script type="text/javascript" src="<@sp.static/>/ipaylinks/js/jquery-1.4.2.min.js"></script>
<!-- data picker controller -->
<!-- jquery validate -->
<script src="<@sp.static/>/ipaylinks/js/jquery/plugins/validate/jquery.validate.min.js" type="text/javascript"></script>
<link href="<@sp.static/>/ipaylinks/js/jquery/plugins/validate/jquery.validate.css" type="text/css" rel="stylesheet" />
<script src="<@sp.static/>/ipaylinks/js/jquery/plugins/validate/messages_cn.js" type="text/javascript"></script>
<script src="<@sp.static/>/ipaylinks/js/jquery/plugins/validate/jquery.form.js" type="text/javascript"></script>
<script src="<@sp.static/>/ipaylinks/js/customValidate.js" type="text/javascript"></script>
<script src="<@sp.static/>/ipaylinks/js/jquery/plugins/validate/jquery.validate.rule.js" type="text/javascript"></script>
<script src="<@sp.static/>/ipaylinks/js/jquery/plugins/zclip/jquery.zclip.js" type="text/javascript"></script>
<script src="<@sp.static/>/ipaylinks/js/jquery/plugins/upload/ajaxfileupload.js" type="text/javascript"></script>
<script type="text/javascript" src="<@sp.static/>/ipaylinks/js/common.js"></script>
<link rel="stylesheet" type="text/css" href="<@sp.static/>/ipaylinks/css/layout.css" />
<link rel="stylesheet" type="text/css" href="<@sp.static/>/ipaylinks/css/main.css"/>
<link href="<@sp.static/>/ipaylinks/js/jquery/plugins/validate/jquery.validate.css" type="text/css" rel="stylesheet" />
<link type="image/x-icon" href="<@sp.static/>/ipaylinks/images/favicon.ico" rel="shortcut icon"/>
<link rel="stylesheet" href="css/amazeui.min.css"/>
<link href="css/ipaylinks20150704.css" rel="stylesheet" type="text/css" />
<title>Payment</title>
<style type="text/css">
.commonLink {
	cursor: pointer;
	text-decoration: none;
}
.commonLink:hover {
	cursor: pointer;
	text-decoration: none;
}
.blueHighlight {
	font-family: 微软雅黑;
	font-size: 13px;
	font-weight: normal;
	font-style: normal;
	text-decoration: none;
	color: #00F;
}
</style>
<script type="text/javascript" charset="utf-8">

</script>
</head>

<body>
	<div class="topbar">
		<div class="wrap clearfix">
			<ul class="topmenu r">
			  <#if Session["userSession"]?exists>
				<li><label style="color:#D9D9D9 !important">
					<#if Session["userSession"]?exists >
					<#assign memberInfo = Session["userSession"]/>
						${memberInfo.verifyName?default('')}
					</#if>
					</label>
				</li>
			   <#else>
				<li>
		      </li>
		    </#if>
			</ul>
		</div>
	</div>
<div class="header">
  <div class="wrap clearfix">
    <h1 class="l"> <img src="<@sp.static/>/ipaylinks/images/logo.png"
					alt="" title="" width="230" height="50" /> </h1>
    <ul class="nav l">
      <li class="nav-item"><a href="javascript:void(0)" title="收银台">cashier desk</a></li>
    </ul>
  </div>
</div>
<div class="mainbox" style="padding-top: 20px;">
 <div class="wrap">
 <div class="section01">
   <!-- 000 -->
       <div class="admin-content" style="font-size: 14px;">
        <div id="a1" style="display:none;background-color:gray;margin:0px 0px;position:absolute; z-index:9999;opacity:0.2;text-align:center;color:red;width:100%;height:100%;"></div>
		<div id="animate" style="display:none;width:100%;height:100%;position:absolute; z-index:99999;text-align:center;color:red;padding-top:100px;">
			<img src="images/loadding.gif" style="opacity:1;" />
			<div style="margin:30px auto;">The card binding is being processed. Please wait for a moment.</div>
		</div>
        <form class="am-form" action="${rc.contextPath}/bindCardChannelPay.htm?method=onSubmit" method="post" id="frm1">
          <table class="am-table am-table-striped am-table-hover table-main">
            <thead>
              <tr style="background-color: #f7f7f7">
                <th class="table-id" colspan="4">
                   <span style="float:left;margin-left:20px">Please fill in the credit card information</span>
                </th>
              </tr>
              <tr>
                 <th colspan="4" style="border: none;"></th>
              </tr>
            <tr>
              <th style="border: none;width:50%;" colspan="2">
                  <img src="images/visa.png" alt="图片不存在" id="visaImg" style="float:right;margin-right:50px"/>
              </th>
              <th style="border: none;width:50%;" colspan="2">
                  <img src="images/master.png" alt="图片不存在" id="masterImg"/>
              </th>
            </tr>
          
            <tr>
               <td colspan="4" style="border-top: 0px;"></td>
            </tr>
            <tr>
              <td style="width:15%;border-top:0px;text-align: right;">Card Number：</td>
              <td colspan="2" align="left" style="border-top: 0px;width:50%">
                <input type="text" name="cardHolderNumber" id="cardHolderNumber" style="width:100%"/>
              </td>
              <td style="border-top:0px;width:35%" align="left"><span style="float:left;color: red">*</span><tip id="cardHolderNumberTip" style="color: red"></tip></td>
            </tr>
            <tr>
              <td  style="border-top: 0px;width:15%;text-align: right;">
              Validity：
              </td>
              <td  style="border-top: 0px;width:25%">
              			<select id="cardExpirationMonth" name="cardExpirationMonth" style="width:100%;padding: 2px;"> 
						<option value=""></option> 
						<option value="01">01</option> 
						<option value="02">02</option> 
						<option value="03">03</option> 
						<option value="04">04</option> 
						<option value="05">05</option> 
						<option value="06">06</option> 
						<option value="07">07</option> 
						<option value="08">08</option> 
						<option value="09">09</option> 
						<option value="10">10</option> 
						<option value="11">11</option> 
						<option value="12">12</option> 
					</select>
              </td>
              <td  style="border-top: 0px;width:25%" align="left">
                <select id="cardExpirationYear" name="cardExpirationYear" style="width:100%;padding: 2px;">
						<option></option>
						<option value="16">2016</option>
						<option value="17">2017</option>
						<option value="18">2018</option>
						<option value="19">2019</option>
						<option value="20">2020</option>
						<option value="21">2021</option>
						<option value="22">2022</option>
						<option value="23">2023</option>
						<option value="24">2024</option>
						<option value="25">2025</option>
						<option value="26">2026</option>
						<option value="27">2027</option>
						<option value="28">2028</option>
						<option value="29">2029</option>
						<option value="30">2030</option>
					</select>
              </td>
              <td   style="border-top: 0px;width:35%" align="left">
                 <span style="color: red">*</span><tip id="cardExpirationTip"></tip>
              </td>
            </tr>
            <tr>
              <td style="width:15%;border-top:0px;text-align: right;">FirstName：</td>
              <td colspan="2" align="left" style="border-top: 0px;width:50%">
                <input type="text" name="cardHolderFirstName" id="cardHolderFirstName" style="width:100%"/>
              </td>
              <td style="border-top:0px;width:35%" align="left">
                  <span style="color: red">*</span><tip id="cardHolderFirstNameTip" style="color: red"></tip>
              </td>
            </tr>
            <tr>
              <td style="width:15%;border-top:0px;text-align: right;">LastName：</td>
              <td colspan="2" align="left" style="border-top: 0px;width:50%">
                <input type="text" name="cardHolderLastName" id="cardHolderLastName" style="width:100%"/>
              </td>
              <td style="border-top:0px;width:35%" align="left">
                  <span style="color: red">*</span><tip id="cardHolderLastNameTip" style="color: red"></tip>
              </td>
            </tr>
            <tr>
              <td style="width:15%;border-top:0px;text-align: right;">CVV：</td>
              <td  align="left" style="border-top: 0px;width:30%">
                <input type="text" style="width:100%;height:31px;" id="securityCode" name="securityCode" maxlength="3" />
              </td>
               <td  align="left" style="border-top: 0px;width:20%">
               <span style="color: red">*</span>
               <img src="images/cvv.png" alt="图片不存在" style="position:relative;top:10px;margin-left:60px;"/>
               </td>
              <td style="border-top:0px;width:35%" align="left">
                  <tip id="resultTip"></tip>
              </td>
            </tr>
            <tr>
               <td colspan="4" style="border-top:0px;"></td>
            </tr>
            <tr>
              <td style="width:15%;border-top:0px;"></td>
              <td colspan="3" style="border-top:0px;">
              <input type="button" id="submit" value="提交" class="fsubmit" style="width:181px;height:32px;"/>
              </td>
            </tr>
          </thead>
        </table>
       		<!-- 
        	<input type="hidden" name="tradeOrderNo" id="tradeOrderNo" value="${tradeOrderNo?default('')}}"/>			
			<input type="hidden" name="partnerId" id="partnerId" value="${partnerId}"/>			
			<input type="hidden" name="orderAmount" id="orderAmount" value="${orderAmount}"/>			
			<input type="hidden" name="currencyCode" id="currencyCode" value="${currencyCode}"/>			
			<input type="hidden" name="orderId" id="orderId" value="${orderId}"/>			
			<input type="hidden" name="payType" value="${payType!'ALL'}"/>
			<input type="hidden" name="orderTerminal" value="${orderTerminal?default('01')}"/>
			<input type="hidden" name="language" value="${language?default('cn')}"/>
			<input type="hidden" name="goodsDesc" id="goodsDesc" value="${goodsDesc?default('')}"/>
			<input type="hidden" name="goodsName" id="goodsName" value="${goodsName?default('')}"/>
			<input type="hidden" name="deviceFingerprintId" id="deviceFingerprintId" value="${deviceFingerprintId?default('')}"/>
			<input type="hidden" name="siteId" id="siteId" value="${siteId?default('')}"/>
			<input type="hidden" name="cardLimit" id="cardLimit" value="${cardLimit?default('')}"/>
			<input type="hidden" name="returnUrl" id="returnUrl" value="${returnUrl?default('')}"/>
			<input type="hidden" name="is3D" id="is3D" value="${is3D?default('')}"/>	
			-->
			
			<input type="hidden" name="partnerId" id="partnerId" value="${partnerId}"/>		
			<input type="hidden" name="orderId" id="orderId" value="${orderId}"/>			
			<input type="hidden" name="payType" value="${payType!'ALL'}"/>
			<input type="hidden" name="language" id="language" value="${language?default('en')}"/>
			<input type="hidden" name="orderTerminal" id="orderTerminal" value="${orderTerminal?default('00')}"/>
			<input type="hidden" name="goodsDesc" id="goodsDesc" value="${goodsDesc?default('')}"/>
			<input type="hidden" name="goodsName" id="goodsName" value="${goodsName?default('')}"/>
			<input type="hidden" name="deviceFingerprintId" id="deviceFingerprintId" value="${deviceFingerprintId?default('')}"/>
			<input type="hidden" name="siteId" id="siteId" value="${siteId?default('')}"/>
			<input type="hidden" name="cardLimit" id="cardLimit" value="${cardLimit?default('')}"/>
			<input type="hidden" name="remark" id="remark" value="${remark?default('')}"/>
			<input type="hidden" name="returnUrl" id="returnUrl" value="${returnUrl?default('')}"/>
			<input type="hidden" name="registerUserId" id="registerUserId" value="${registerUserId?default('')}"/>
			<input type="hidden" name="customerIP" id="customerIP" value="${customerIP?default('')}"/>	
			<input type="hidden" name="paymentChannelItems" id="paymentChannelItems" value="${paymentChannelItems?default('')}"/>	
			<input type="hidden" name="tradeType" id="tradeType" value="${tradeType?default('')}"/>	
			<input type="hidden" name="noticeUrl" id="noticeUrl" value="${noticeUrl?default('')}"/>	
			<input type="hidden" name="billAddress" id="billAddress" value="${billAddress?default('')}"/>	
			<input type="hidden" name="billCity" id="billCity" value="${billCity?default('')}"/>	
			<input type="hidden" name="billCountryCode" id="billCountryCode" value="${billCountryCode?default('')}"/>	
			<input type="hidden" name="billEmail" id="billEmail" value="${billEmail?default('')}"/>	
			<input type="hidden" name="billFirstName" id="billFirstName" value="${billFirstName?default('')}"/>	
			<input type="hidden" name="billLastName" id="billLastName" value="${billLastName?default('')}"/>	
			<input type="hidden" name="billPhoneNumber" id="billPhoneNumber" value="${billPhoneNumber?default('')}"/>	
			<input type="hidden" name="billPostalCode" id="billPostalCode" value="${billPostalCode?default('')}"/>	
			<input type="hidden" name="billState" id="billState" value="${billState?default('')}"/>	
			<input type="hidden" name="shippingFirstName" id="billFirstName" value="${shippingFirstName?default('')}"/>	
			<input type="hidden" name="shippingLastName" id="billLastName" value="${shippingLastName?default('')}"/>
        </form>
</div>
   <!-- 000 -->
</div>
</div>
</div>
<div class="footer">
		<div class="box_inner_03" style="margin-top: 0px;height: 74px;">
			<div class="buttom_img_01">
				<img src="images/06.png" alt="图片存在"/>
			</div>
			<div class="buttom_img_02">
				<img src="images/05.png" alt="图片存在"/>
			</div>
			<div class="buttom_img_03" style="padding-top:5px;">
				<img src="images/04.png" alt="图片存在"/>
			</div>
			<div class="buttom_img_03">
				<img src="images/07.png" alt="图片存在"/>
			</div>
		</div>
</div>
<script type="text/javascript">

function check(){
	var cardHolderNumber = $('#cardHolderNumber').val();
	if('' == cardHolderNumber){
		$('#cardHolderNumberTip').html('Please fill in Card Number.');
		return false;
	}
	var cardExpirationMonth = $('#cardExpirationMonth').val();
	if('' == cardExpirationMonth){
		$('#cardExpirationTip').html('Please choose Valid Month.');
		return false;
	}
	var cardExpirationYear = $('#cardExpirationYear').val();
	if('' == cardExpirationYear){
		$('#cardExpirationTip').html('Please choose Valid Year.');
		return false;
	}
	var cardHolderFirstName = $('#cardHolderFirstName').val();
	if('' == cardHolderFirstName){
		$('#cardHolderFirstNameTip').html('Please fill in First Name.');
		return false;
	}
	var cardHolderLastName = $('#cardHolderLastName').val();
	if('' == cardHolderLastName){
		$('#cardHolderLastNameTip').html('Please fill in last Name.');
		return false;
	}
	var securityCode = $('#securityCode').val();
	if('' == securityCode){
		$('#securityCodeTip').html('Please fill in Card Verification Value.');
		return false;
	}
	
	return true;
}

String.prototype.startWith=function(str){

    var reg=new RegExp("^"+str);
    return reg.test(this);
}


$(function(){
	
	$("#cardHolderNumber").blur(function(){
		var cardHolderNumber = $('#cardHolderNumber').val();
		var cardLimit = $("#cardLimit").val();
		
		if('' != cardHolderNumber){
			$('#cardHolderNumberTip').html('');
		}
		if(cardHolderNumber.startWith("4")){
			$("#visaImg").attr("src","images/visa.png");
			$("#masterImg").attr("src","images/master-1.png");
		}else if(cardHolderNumber.startWith("5")){
			$("#visaImg").attr("src","images/visa-1.png");
			$("#masterImg").attr("src","images/master.png");
		}
		
	});
	
	$("#cardExpirationMonth").blur(function(){
		var cardExpirationMonth = $('#cardExpirationMonth').val();
		if('' != cardExpirationMonth){
			$('#cardExpirationTip').html('');
		}
		
	});
	
	$("#cardExpirationYear").blur(function(){
		var cardExpirationMonth = $('#cardExpirationMonth').val();
		var cardExpirationYear = $('#cardExpirationYear').val();
		if('' != cardExpirationMonth && '' != cardExpirationYear){
			$('#cardExpirationTip').html('');
		}
		
	});
	
	$("#cardHolderFirstName").blur(function(){
		var cardHolderFirstName = $('#cardHolderFirstName').val();
		if('' != cardHolderFirstName){
			$('#cardHolderFirstNameTip').html('');
		}
	});
	
	$("#cardHolderLastName").blur(function(){
		var cardHolderLastName = $('#cardHolderLastName').val();
		if('' != cardHolderLastName){
			$('#cardHolderLastNameTip').html('');
		}
	});
	
	$("#securityCode").blur(function(){
		var securityCode = $('#securityCode').val();
		if('' != securityCode){
			$('#securityCodeTip').html('');
		}
	});
	
	$("#submit").click(function(){
		
		$('#resultTip').html('');
		if(check()){
			shade();
			var pars = $("#frm1").serialize();
			window.location.href='${rc.contextPath}/bindCardChannelPay.htm?method=onSubmit&'+pars;
		}
		
	});

});

function shade(){
	
	var box01Width = $(".section01").width();
	var box01Height = $(".section01").innerHeight() ;
	
	var inner02Width = $(".section01").width();
	var inner02Height = $(".section01").height();
	
	var animateMarginTop = (box01Height - inner02Height) / 2 ;
	var animateMarginLeft = (box01Width - inner02Width) / 2 ;
	
	$("#a1").css({width:box01Width, height:box01Height ,display:'block'});
	$("#animate").css("margin-top", animateMarginTop);
	$("#animate").css("margin-left", animateMarginLeft);
	$("#animate").css({width:inner02Width,height:inner02Height,display:'block'});
}

</script>
</body>
</html>

<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="tradeData">
	<typeAlias alias="tradeData" type="com.pay.txncore.model.TradeData"/>
    <resultMap id="tradeDataResult" class="tradeData">
        <result column="TRADE_ORDER_NO" property="tradeOrderNo" jdbcType="DECIMAL"/>
        <result column="STATUS" property="status" jdbcType="DECIMAL"/>
        <result column="PARTNER_ID" property="partnerId" jdbcType="VARCHAR"/>
        <result column="MERCHANT_ID" property="merchantId" jdbcType="VARCHAR"/>
        <result column="MERCHANT_NAME" property="merchantName" jdbcType="VARCHAR"/>
        <result column="GOODS_COUNT" property="goodsCount" jdbcType="DECIMAL"/>
        <result column="UPDATE_DATE" property="updateDate" jdbcType="TIMESTAMP"/>
        <result column="CUSTOMER_IP" property="customerIP" jdbcType="VARCHAR"/>
        <result column="ORDER_AMOUNT" property="orderAmount" jdbcType="DECIMAL"/>
        <result column="PAYMENT_AMOUNT" property="paymentAmount" jdbcType="VARCHAR"/>
        <result column="DISPLAY_NAME" property="displayName" jdbcType="VARCHAR"/>
        <result column="SUBMIT_TIME" property="submitTime" jdbcType="VARCHAR"/>
        <result column="FAILURE_TIME" property="failureTime" jdbcType="VARCHAR"/>
        <result column="CREATE_DATE" property="createDate" jdbcType="TIMESTAMP"/>
        <result column="GOODS_NAME" property="goodsName" jdbcType="VARCHAR"/>
        <result column="ORDER_ID" property="orderId" jdbcType="VARCHAR"/>
        <result column="RETURN_URL" property="returnUrl" jdbcType="VARCHAR"/>
        <result column="NOTICE_URL" property="noticeUrl" jdbcType="VARCHAR"/>
        <result column="LANGUAGE" property="language" jdbcType="VARCHAR"/>
        <result column="VERSION" property="version" jdbcType="VARCHAR"/>
        <result column="SITEID" property="siteId" jdbcType="VARCHAR"/>
        <result column="COUPON_NUMBER" property="couponNumber" jdbcType="VARCHAR"/>
        <result column="COUPON_VALUE" property="couponValue" jdbcType="VARCHAR"/>
        <result column="PAYMENT_ORDER_NO" property="paymentOrderNo" jdbcType="VARCHAR"/>
        <result column="CHANNEL_ORDER_NO" property="channelOrderNo" jdbcType="VARCHAR"/>
        <result column="CURRENCY" property="currency" jdbcType="VARCHAR"/>
        <result column="TRADE_RESP_CODE" property="tradeRespCode" jdbcType="VARCHAR"/>
        <result column="TRADE_RESP_MSG" property="tradeRespMsg" jdbcType="VARCHAR"/>
        <result column="CHANNEL_RESP_CODE" property="channelRespCode" jdbcType="VARCHAR"/>
        <result column="CHANNEL_RESP_MSG" property="channelRespMsg" jdbcType="VARCHAR"/>
        <result column="PAY_WAY" property="payWay" jdbcType="VARCHAR"/>
        <result column="PAY_TYPE" property="payType" jdbcType="VARCHAR"/>
        <result column="SETTLEMENT_CURRENCY_CODE" property="settlementCurrencyCode" jdbcType="VARCHAR"/>
        <result column="BILL_NAME" property="billName" jdbcType="VARCHAR"/>
        <result column="BILL_FIRST_NAME" property="billFirstName" jdbcType="VARCHAR"/>
        <result column="BILL_LAST_NAME" property="billLastName" jdbcType="VARCHAR"/>
    	<result column="BILL_PHONE" property="billPhone" jdbcType="VARCHAR"/>
    	<result column="BILL_EMAIL" property="billEmail" jdbcType="VARCHAR"/>
    	<result column="BILL_COUNTRY" property="billCountry" jdbcType="VARCHAR"/>
    	<result column="BILL_STATE" property="billState" jdbcType="VARCHAR"/>
    	<result column="BILL_CITY" property="billCity" jdbcType="VARCHAR"/>
    	<result column="BILL_STREET" property="billStreet" jdbcType="VARCHAR"/>
    	<result column="BILL_ADRESS" property="billAddress" jdbcType="VARCHAR"/>
    	<result column="BILL_POSTALCODE" property="billPostCode" jdbcType="VARCHAR"/>
    	<result column="SHIPPING_NAME" property="shippingName" jdbcType="VARCHAR"/>
    	<result column="SHIPPING_FIRST_NAME" property="shippingFirstName" jdbcType="VARCHAR"/>
    	<result column="SHIPPING_LAST_NAME" property="shippingLastName" jdbcType="VARCHAR"/>
    	<result column="SHIPPING_COMPANY" property="shippingCompany" jdbcType="VARCHAR"/>
    	<result column="SHIPPING_PHONE" property="shippingPhone" jdbcType="VARCHAR"/>
    	<result column="SHIPPING_EMAIL" property="shippingEmail" jdbcType="VARCHAR"/>
    	<result column="SHIPPING_COUNTRY" property="shippingCountry" jdbcType="VARCHAR"/>
    	<result column="SHIPPING_STATE" property="shippingState" jdbcType="VARCHAR"/>
    	<result column="SHIPPING_CITY" property="shippingCity" jdbcType="VARCHAR"/>
    	<result column="SHIPPING_STREET" property="shippingStreet" jdbcType="VARCHAR"/>
    	<result column="SHIPPING_ADDRESS" property="shippingAddress" jdbcType="VARCHAR"/>
    	<result column="SHIPPING_POSTALCODE" property="shippingPostalCode" jdbcType="VARCHAR"/>
    	<result column="ORG_CODE" property="orgCode" jdbcType="VARCHAR"/>
    	<result column="ORG_MERCHANT_CODE" property="orgMerchantCode" jdbcType="VARCHAR"/>
    	<result column="ARCD_ID" property="cardNo" jdbcType="VARCHAR"/>
    	<result column="SCER_ID" property="secCode" jdbcType="VARCHAR"/>
    	<result column="YEEX_ID" property="expYear" jdbcType="VARCHAR"/>
    	<result column="MOEX_ID" property="expMonth" jdbcType="VARCHAR"/>
    	<result column="NEFT_NE" property="cardFirstName" jdbcType="VARCHAR"/>
    	<result column="NELT_NE" property="cardLastName" jdbcType="VARCHAR"/>
    	<result column="PE_CDNE" property="cardPhone" jdbcType="VARCHAR"/>
    	<result column="EL_CDMA" property="cardEmail" jdbcType="VARCHAR"/>
    	<result column="AR_CURRENCY" property="cardCurrency" jdbcType="VARCHAR"/>
    	<result column="AR_IN" property="cardBin" jdbcType="VARCHAR"/>
    	<result column="CD_ORG" property="cardOrg" jdbcType="VARCHAR"/>
    	<result column="CD_COUNTRY" property="cardCountry" jdbcType="VARCHAR"/>
    	<result column="CD_TYPE" property="cardType" jdbcType="VARCHAR"/>
    	<result column="ISSUER" property="issuer" jdbcType="VARCHAR"/>
    	<result column="ISSUER_COUNTRY" property="issuerCountry" jdbcType="VARCHAR"/>
    	<result column="CD_CLASS" property="cardClass" jdbcType="VARCHAR"/>
    	<result column="DEVICE_ID" property="deviceFingerprintId" jdbcType="VARCHAR"/>
    	<result column="REGISTER_USER_ID" property="registerUserId" jdbcType="VARCHAR"/>
    	<result column="REGISTER_USER_EMAIL" property="registerUserEmail" jdbcType="VARCHAR"/>
    	<result column="ORDER_TERMINAL" property="orderTerminal" jdbcType="VARCHAR"/>
    	<result column="REMARK" property="remark" jdbcType="VARCHAR"/>
    	<result column="CHARSET" property="charset" jdbcType="VARCHAR"/>
    	<result column="SIGN_TYPE" property="signType" jdbcType="VARCHAR"/>
    	<result column="SESSION_ID" property="sessionId" jdbcType="VARCHAR"/>
    	<result column="DATA_LENTH" property="inputLength" jdbcType="int"/>
        <result column="DATA_STAMP" property="inputData" jdbcType="VARCHAR"/>
        <result column="IP_NUM" property="ipNumber" jdbcType="DECIMAL"/>
        <result column="TOKEN" property="token" jdbcType="VARCHAR"/>
    </resultMap>
    
    <insert id="create" parameterClass="tradeData">
        INSERT INTO TRADE_DATA(   
                                TRADE_ORDER_NO,
                                STATUS,
                                PARTNER_ID,
                                MERCHANT_ID,
                                MERCHANT_NAME,
                                GOODS_COUNT,
                                CUSTOMER_IP,
                                ORDER_AMOUNT,
                                PAYMENT_AMOUNT,
                                DISPLAY_NAME,
                                SUBMIT_TIME,
                                FAILURE_TIME,
                                CREATE_DATE,
                                GOODS_NAME,
                                GOODS_DESC,
                                ORDER_ID,
                                RETURN_URL,
                                NOTICE_URL,
                                LANGUAGE,
                                VERSION,
                                SITEID,
                                COUPON_NUMBER,
                                COUPON_VALUE,
                                PAYMENT_ORDER_NO,
                                CHANNEL_ORDER_NO,
                                CURRENCY,
                                PAY_WAY,
                                PAY_TYPE,
                                SETTLEMENT_CURRENCY_CODE,
                                BILL_NAME,
                                BILL_FIRST_NAME,
                                BILL_LAST_NAME,
                                BILL_PHONE,
                                BILL_EMAIL,
                                BILL_COUNTRY,
                                BILL_STATE,
                                BILL_CITY,
                                BILL_STREET,
                                BILL_ADRESS,
                                BILL_POSTALCODE,
                                SHIPPING_NAME,
                                SHIPPING_FIRST_NAME,
                                SHIPPING_LAST_NAME,
                                SHIPPING_COUNTRY,
                                SHIPPING_STATE,
                                SHIPPING_CITY,
                                SHIPPING_STREET,
                                SHIPPING_PHONE,
                                SHIPPING_EMAIL,
                                SHIPPING_ADDRESS,
                                SHIPPING_COMPANY,
                                SHIPPING_POSTALCODE,
                                ORG_CODE,
                                ORG_MERCHANT_CODE,
                                ARCD_ID,
                                SCER_ID,
                                YEEX_ID,
                                MOEX_ID,
                                NEFT_NE,
                                NELT_NE,
                                PE_CDNE,
                                EL_CDMA,
                                AR_CURRENCY,
                                AR_IN,
                                CD_ORG,
                                CD_COUNTRY,
                                CD_TYPE,
                                ISSUER,
                                ISSUER_COUNTRY,
                                CD_CLASS,
                                DEVICE_ID,
                                REGISTER_USER_ID,
                                REGISTER_USER_EMAIL,
                                ORDER_TERMINAL,
                                REMARK,
                                CHARSET,
                                SIGN_TYPE,
                                SESSION_ID,
                                DATA_LENTH,
                                DATA_STAMP,
                                IP_NUM,
                                TOKEN
        )
        VALUES(
                                #tradeOrderNo#,
                                #status#,
                                #partnerId#,
                                #merchantId#,
                                #merchantName#,
                                #goodsCount#,
                                #customerIP#,
                                #orderAmount#,
                                #paymentAmount#,
                                #displayName#,
                                #submitTime#,
                                #failureTime#,
                                #createDate#,
                                #goodsName#,
                                #goodsDesc#,
                                #orderId#,
                                #returnUrl#,
                                #noticeUrl#,
                                #language#,
                                #version#,
                                #siteId#,
                                #couponNumber#,
                                #couponValue#,
                                #paymentOrderNo#,
                                #channelOrderNo#,
                                #currency#,
                                #payWay#,
                                #payType#,
                                #settlementCurrencyCode#,
                                #billName#,
                                #billFirstName#,
                                #billLastName#,
                                #billPhone#,
                                #billEmail#,
                                #billCountry#,
                                #billState#,
                                #billCity#,
                                #billStreet#,
                                #billAddress#,
                                #billPostCode#,
                                #shippingName#,
                                #shippingFirstName#,
                                #shippingLastName#,
                                #shippingCountry#,
                                #shippingState#,
                                #shippingCity#,
                                #shippingStreet#,
                                #shippingPhone#,
                                #shippingEmail#,
                                #shippingAddress#,
                                #shippingCompany#,
                                #shippingPostalCode#,
                                #orgCode#,
                                #orgMerchantCode#,
                                #cardNo#,
                                #secCode#,
                                #expYear#,
                                #expMonth#,
                                #cardFirstName#,
                                #cardLastName#,
                                #cardPhone#,
                                #cardEmail#,
                                #cardCurrency#,
                                #cardBin#,
                                #cardOrg#,
                                #cardCountry#,
                                #cardType#,
                                #issuer#,
                                #issuerCountry#,
                                #cardClass#,
                                #deviceFingerprintId#,
                                #registerUserId#,
                                #registerUserEmail#,
                                #orderTerminal#,
                                #remark#,
                                #charset#,
                                #signType#,
                                #sessionId#,
                                #inputLength#,
                                #inputData#,
                                #ipNumber#,
                                #token#
		)
    </insert>
    
    <update id="update" parameterClass="tradeData">
        UPDATE TRADE_DATA
        <dynamic prepend="SET">
        <isNotNull prepend="," property="paymentOrderNo">
            PAYMENT_ORDER_NO = #paymentOrderNo#
        </isNotNull>
        <isNotNull prepend="," property="channelOrderNo">
            CHANNEL_ORDER_NO = #channelOrderNo#
        </isNotNull>
        <isNotNull prepend="," property="tradeOrderNo">
            TRADE_ORDER_NO = #tradeOrderNo#
        </isNotNull>
        <isNotNull prepend="," property="status">
            STATUS = #status#
        </isNotNull>
        <isNotNull prepend="," property="cardNo">
            ARCD_ID = #cardNo#
        </isNotNull>
        <isNotNull prepend="," property="secCode">
            SCER_ID = #secCode#
        </isNotNull>
        <isNotNull prepend="," property="expYear">
            YEEX_ID = #expYear#
        </isNotNull>
        <isNotNull prepend="," property="expMonth">
            MOEX_ID = #expMonth#
        </isNotNull>
        <isNotNull prepend="," property="cardFirstName">
            NEFT_NE = #cardFirstName#
        </isNotNull>
        <isNotNull prepend="," property="cardLastName">
            NELT_NE = #cardLastName#
        </isNotNull>
        <isNotNull prepend="," property="cardPhone">
            PE_CDNE = #cardPhone#
        </isNotNull>
        <isNotNull prepend="," property="cardEmail">
            EL_CDMA = #cardEmail#
        </isNotNull>
        <isNotNull prepend="," property="cardCurrency">
            AR_CURRENCY = #cardCurrency#
        </isNotNull>
        <isNotNull prepend="," property="cardBin">
            AR_IN = #cardBin#
        </isNotNull>
        <isNotNull prepend="," property="cardOrg">
            CD_ORG = #cardOrg#
        </isNotNull>
        <isNotNull prepend="," property="cardCountry">
            CD_COUNTRY = #cardCountry#
        </isNotNull>
        <isNotNull prepend="," property="cardType">
            CD_TYPE = #cardType#
        </isNotNull>
        <isNotNull prepend="," property="issuer">
            ISSUER = #issuer#
        </isNotNull>
        <isNotNull prepend="," property="issuerCountry">
            ISSUER_COUNTRY = #issuerCountry#
        </isNotNull>
        <isNotNull prepend="," property="cardClass">
            CD_CLASS = #cardClass#
        </isNotNull>
        <isNotNull prepend="," property="tradeRespCode">
            TRADE_RESP_CODE = #tradeRespCode#
        </isNotNull>
        <isNotNull prepend="," property="tradeRespMsg">
            TRADE_RESP_MSG = #tradeRespMsg#
        </isNotNull>
        <isNotNull prepend="," property="channelRespCode">
            CHANNEL_RESP_CODE = #channelRespCode#
        </isNotNull>
        <isNotNull prepend="," property="channelRespMsg">
            CHANNEL_RESP_MSG = #channelRespMsg#
        </isNotNull>
        <isNotNull prepend="," property="partnerId">
            PARTNER_ID = #partnerId#
        </isNotNull>
        <isNotNull prepend="," property="updateDate">
            UPDATE_DATE = #updateDate#
        </isNotNull>
        <isNotNull prepend="," property="inputLength">
            DATA_LENTH = #inputLength#
        </isNotNull>
        <isNotNull prepend="," property="inputData">
            DATA_STAMP = #inputData#
        </isNotNull>
        </dynamic>
        WHERE TRADE_ORDER_NO = #tradeOrderNo#
        <isNotNull prepend="and" property="status">
        	status = #status#
        </isNotNull>
    </update>

    <select id="findByCriteria" resultMap="tradeDataResult">
        SELECT A.*
         FROM TRADE_DATA A
        <dynamic prepend="WHERE"> 
        <isNotNull prepend="AND" property="tradeOrderNo">
           A.TRADE_ORDER_NO = #tradeOrderNo# 
        </isNotNull>
        <isNotNull prepend="AND" property="channelOrderNo">
           A.CHANNEL_ORDER_NO = #channelOrderNo# 
        </isNotNull>
        <isNotNull prepend="AND" property="status">
           A.STATUS = #status# 
        </isNotNull>
        <isNotNull prepend="AND" property="statusList">
          A.STATUS in ($statusList$) 
        </isNotNull>
        <isNotNull prepend="AND" property="partnerId">
          A.PARTNER_ID = #partnerId# 
        </isNotNull>
        <isNotNull prepend="AND" property="orderAmount">
           A.ORDER_AMOUNT = #orderAmount# 
        </isNotNull>
        <isNotNull prepend="AND" property="displayName">
           A.DISPLAY_NAME = #displayName# 
        </isNotNull>
		<isNotEmpty prepend="AND" property="beginTime">
			A.CREATE_DATE <![CDATA[>=]]> to_date(#beginTime#, 'yyyy-MM-dd hh24:mi:ss')
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endTime">
           A.CREATE_DATE <![CDATA[<=]]> to_date(#endTime#, 'yyyy-MM-dd hh24:mi:ss')
		</isNotEmpty>
        <isNotNull prepend="AND" property="orderId">
          A.ORDER_ID = #orderId# 
        </isNotNull>
        <isNotNull prepend="AND" property="payType">
           A.PAY_TYPE = #payType# 
        </isNotNull>        
        </dynamic>
        order by A.CREATE_DATE desc
    </select>

    <select id="findByCriteria_COUNT"  resultClass="java.lang.Integer">
        SELECT count(*) FROM TRADE_DATA A left join acc.t_enterprise_contract B on B.MEMBER_CODE = A.PARTNER_ID 
        <dynamic prepend="WHERE"> 
          <isNotNull prepend="AND" property="tradeOrderNo">
           A.TRADE_ORDER_NO = #tradeOrderNo# 
        </isNotNull>
        <isNotNull prepend="AND" property="channelOrderNo">
           A.CHANNEL_ORDER_NO = #channelOrderNo# 
        </isNotNull>
        <isNotNull prepend="AND" property="status">
           A.STATUS = #status# 
        </isNotNull>
        <isNotNull prepend="AND" property="statusList">
          A.STATUS in ($statusList$) 
        </isNotNull>
        <isNotNull prepend="AND" property="partnerId">
          A.PARTNER_ID = #partnerId# 
        </isNotNull>
        <isNotNull prepend="AND" property="orderAmount">
           A.ORDER_AMOUNT = #orderAmount# 
        </isNotNull>
        <isNotNull prepend="AND" property="displayName">
           A.DISPLAY_NAME = #displayName# 
        </isNotNull>
		<isNotEmpty prepend="AND" property="beginTime">
			A.CREATE_DATE <![CDATA[>=]]> to_date(#beginTime#, 'yyyy-MM-dd hh24:mi:ss')
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endTime">
           A.CREATE_DATE <![CDATA[<=]]> to_date(#endTime#, 'yyyy-MM-dd hh24:mi:ss')
		</isNotEmpty>
        <isNotNull prepend="AND" property="orderId">
          A.ORDER_ID = #orderId# 
        </isNotNull>
        <isNotNull prepend="AND" property="payType">
           A.PAY_TYPE = #payType# 
        </isNotNull>         
        </dynamic>
    </select>
    
    <select id="countByCriteria"  resultClass="java.lang.Integer">
        SELECT count(*) FROM TRADE_DATA
        <dynamic prepend="WHERE">
        <isNotNull prepend="AND" property="tradeOrderNo">
           A.TRADE_ORDER_NO = #tradeOrderNo# 
        </isNotNull>
        <isNotNull prepend="AND" property="channelOrderNo">
           A.CHANNEL_ORDER_NO = #channelOrderNo# 
        </isNotNull>
        <isNotNull prepend="AND" property="status">
           A.STATUS = #status# 
        </isNotNull>
        <isNotNull prepend="AND" property="statusList">
          A.STATUS in ($statusList$) 
        </isNotNull>
        <isNotNull prepend="AND" property="partnerId">
          A.PARTNER_ID = #partnerId# 
        </isNotNull>
        <isNotNull prepend="AND" property="orderAmount">
           A.ORDER_AMOUNT = #orderAmount# 
        </isNotNull>
        <isNotNull prepend="AND" property="displayName">
           A.DISPLAY_NAME = #displayName# 
        </isNotNull>
		<isNotEmpty prepend="AND" property="beginTime">
			A.CREATE_DATE <![CDATA[>=]]> to_date(#beginTime#, 'yyyy-MM-dd hh24:mi:ss')
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endTime">
           A.CREATE_DATE <![CDATA[<=]]> to_date(#endTime#, 'yyyy-MM-dd hh24:mi:ss')
		</isNotEmpty>
        <isNotNull prepend="AND" property="orderId">
          A.ORDER_ID = #orderId# 
        </isNotNull>
        <isNotNull prepend="AND" property="payType">
           A.PAY_TYPE = #payType# 
        </isNotNull>       
        </dynamic>
    </select>
</sqlMap>